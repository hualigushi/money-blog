

Mobx是通过监听数据的属性变化直接在数据上更改来触发UI的渲染

Mobx的监听方式：

- 在Mobx 5 之前采用Object.defineProperty
- 在Mobx 5 以后采用Proxy 方案



Mobx 的执行流程一共有这么几个步骤：

1. 页面事件（生命周期、点击事件等等）触发 action 的执行。
2. 通过 action 来修改状态。
3. 状态更新后，`computed` 计算属性也会根据依赖的状态重新计算属性值。
4. 状态更新后会触发 `reaction`，从而响应这次状态变化来进行一些操作（渲染组件、打印日志等等）。







总结一下 Redux 和 Mobx 的区别，包括这些方面：


- Redux 鼓励一个应用只用一个 Store，Mobx 鼓励使用多个 Store；


- Redux 使用“拉”的方式使用数据，这一点和 React是一致的，但 Mobx 使用“推”的方式使用数据，和 RxJS 这样的工具走得更近；


- Redux 鼓励数据范式化，减少冗余，Mobx 容许数据冗余，但同样能保持数据一致。
- redux使⽤plain object保存数据，需要⼿动处理变化后的操作；mobx适⽤observable保存数据，数据变化后⾃动处理响应的操作
- redux使⽤不可变状态，这意味着状态是只读的，不能直接去修改它，⽽是应该返回⼀个新的状态，同时使⽤纯函数；mobx中的状态是可变的，可以直接对其进⾏修改
- mobx中有更多的抽象和封装，调试会⽐较困难，同时结果也难以预测；⽽redux提供能够进⾏时间回溯的开发⼯具，同时其纯函数以及更少的抽象，让调试变得更加的容易



场景辨析：

- 基于以上区别，我们可以简单得分析⼀下两者的不同使⽤场景。
- mobx更适合数据不复杂的应⽤：mobx难以调试，很多状态⽆法回溯，⾯对复杂度⾼的应⽤时，往往⼒不从⼼。
- redux适合有回溯需求的应⽤：⽐如⼀个画板应⽤、⼀个表格应⽤，很多时候需要撤销、重做等操作，由于redux不可变的特性，天然⽀持这些操作。
- mobx适合短平快的项⽬：mobx上⼿简单，样板代码少，可以很⼤程度上提⾼开发效率。
- 当然mobx和redux也并不⼀定是⾮此即彼的关系，你也可以在项⽬中⽤redux作为全局状态管理，⽤mobx作为组件局部状态管理器来⽤。

