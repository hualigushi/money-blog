#### **DNS解析**



具体步骤：

1. 查询本地host文件，如果本地hosts文件有这个域名和ip的映射关系, 直接返回对ip
2. 如果hosts文中中没有对应域名的映射，则查找本地DNS解析器缓存
3. 如果host文件和本地DNS解析器缓存中都么有域名的映射，则会首先到本地DNS服务器进行查询
4. 如果本地DNS服务器已经缓存了此域名的映射，则直接返回
5. 如果本地服务器的缓存中没有对应映射关系，则本地DNS服务器会对该域名进行解析，如果要查询的域名是由当前服务器解析，则将解析结果返回。
6. 如果要查询的域名不是由当前的DNS服务器进行解析则会向根域的DNS服务器发起请求，根域DNS服务器会根据域名返回一个负责该顶级域名的DNS服务器ip，本地服务器拿到ip后向这个顶级域名DNS服务器请求 g. 如果这个顶级DNS服务器无法解析这个域名，会返回二级DNS服务器的ip，这样一直重复查找，直到找到对应的ip映射。整个DNS查询的过程，只要某个DNS服务器上有对应的缓存，就会直接返回，不会继续查找。